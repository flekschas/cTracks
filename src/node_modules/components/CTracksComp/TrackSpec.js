import React from 'react'

import './TrackSpec.css'

import hamradio from 'hamradio'
import { CompactPicker } from 'react-color'

class TrackSpec extends React.Component {
  setTrackValue = (key, value) => {
    hamradio.publish('track/modify', {
      ...this.props.track,
      track: {
        ...this.props.track.track,
        [key]: value
      }
    })
  }

  setOptionValue = (option, value) => {
    hamradio.publish('track/modify', {
      ...this.props.track,
      track: {
        ...this.props.track.track,
        options: {
          ...this.props.track.track.options,
          [option]: value
        }
      }
    })
  }

  pointColorChange = (color) => {
    this.setOptionValue('pointColor', color.hex)
  }

	render () {
    console.log(this.props)
		return (
      <div>
        <div>
          <label>{this.props.track.track.name}</label>
          <label>{this.props.track.track.server}</label>
        </div>
        <div>
          <label>Color</label>
          <CompactPicker color={this.props.track.track.options.pointColor} onChange={this.pointColorChange}/>
        </div>
        <button type="button" className="btn btn-default" onClick={this.props.done}>Done</button>
      </div>
		)
	}
}


export default TrackSpec;
